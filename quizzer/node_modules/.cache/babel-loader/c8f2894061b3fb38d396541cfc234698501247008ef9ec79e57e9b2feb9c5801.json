{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation,Link}from'react-router-dom';import logo from'./logo.svg';import userIcon from'./user.svg';import logoutIcon from'./logout.svg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ResultPage(){const location=useLocation();const{score}=location.state||{score:'Score non trouvé'};const[quizResults,setQuizResults]=useState({scoreTotal:0,scoreHistory:[],userRanking:[]});const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const fetchQuizResults=async()=>{const token=localStorage.getItem('userToken');try{const response=await fetch('http://localhost:8080/get-result',{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});if(!response.ok){throw new Error('Erreur lors de la récupération des résultats du quiz');}const data=await response.json();setQuizResults(data);setIsLoading(false);}catch(error){console.error('Erreur lors de la récupération des résultats du quiz',error);setIsLoading(false);}};fetchQuizResults();},[]);const signOut=()=>{localStorage.removeItem('userToken');// Supprime le token du localStorage\nconsole.log(\"Déconnexion de l'utilisateur\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"main-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Logo\",className:\"home-logo\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-logout-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:/*#__PURE__*/_jsx(\"img\",{src:userIcon,alt:\"Profil Utilisateur\",className:\"user-icon\"})}),/*#__PURE__*/_jsx(\"img\",{src:logoutIcon,alt:\"D\\xE9connexion\",className:\"logout-icon\",onClick:signOut,style:{cursor:'pointer'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Page de R\\xE9sultats\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Votre score pour cette partie est : \",score]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Votre score total est : \",quizResults.scoreTotal]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Historique des scores\"}),isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Chargement...\"}):/*#__PURE__*/_jsx(\"ul\",{children:quizResults.scoreHistory.map((score,index)=>/*#__PURE__*/_jsx(\"li\",{children:score},index))}),/*#__PURE__*/_jsx(\"h2\",{children:\"Classement\"}),isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Chargement du classement...\"}):/*#__PURE__*/_jsx(\"div\",{children:quizResults.userRanking.map((user,index)=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[index+1,\" - \",user.pseudo,\" avec un score de \",user.score]})},index))})]})]});}export default ResultPage;","map":{"version":3,"names":["React","useState","useEffect","useLocation","Link","logo","userIcon","logoutIcon","jsx","_jsx","jsxs","_jsxs","ResultPage","location","score","state","quizResults","setQuizResults","scoreTotal","scoreHistory","userRanking","isLoading","setIsLoading","fetchQuizResults","token","localStorage","getItem","response","fetch","method","headers","concat","ok","Error","data","json","error","console","signOut","removeItem","log","className","children","to","src","alt","onClick","style","cursor","map","index","user","pseudo"],"sources":["/Users/vepa/Desktop/Projet_PC3R/spotrend-quizzer/src/ResultPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation, Link} from 'react-router-dom';\nimport logo from './logo.svg'; \nimport userIcon from './user.svg'; \nimport logoutIcon from './logout.svg'; \n\nfunction ResultPage() {\n  const location = useLocation();\n  const { score } = location.state || { score: 'Score non trouvé' };\n  const [quizResults, setQuizResults] = useState({\n    scoreTotal: 0,\n    scoreHistory: [],\n    userRanking: []\n  });\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchQuizResults = async () => {\n      const token = localStorage.getItem('userToken');\n      try {\n        const response = await fetch('http://localhost:8080/get-result', {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (!response.ok) {\n          throw new Error('Erreur lors de la récupération des résultats du quiz');\n        }\n        const data = await response.json();\n        setQuizResults(data);\n        setIsLoading(false);\n      } catch (error) {\n        console.error('Erreur lors de la récupération des résultats du quiz', error);\n        setIsLoading(false);\n      }\n    };\n\n    fetchQuizResults();\n  }, []);\n\n  const signOut = () => {\n    localStorage.removeItem('userToken'); // Supprime le token du localStorage\n    console.log(\"Déconnexion de l'utilisateur\");\n  };\n\n  return (\n    <div className=\"main-page\">\n      <div className=\"sidebar\">\n        <div className=\"logo-container\">\n          <Link to=\"/\"><img src={logo} alt=\"Logo\" className=\"home-logo\" /></Link>\n        </div>\n        <div className=\"user-logout-container\">\n          <Link to=\"/profile\"><img src={userIcon} alt=\"Profil Utilisateur\" className=\"user-icon\" /></Link>\n          <img src={logoutIcon} alt=\"Déconnexion\" className=\"logout-icon\" onClick={signOut} style={{cursor: 'pointer'}} />\n        </div>\n      </div>\n      <div className=\"content\">\n        <h1>Page de Résultats</h1>\n        <p>Votre score pour cette partie est : {score}</p>\n        <p>Votre score total est : {quizResults.scoreTotal}</p>\n        <h2>Historique des scores</h2>\n        {isLoading ? (\n          <p>Chargement...</p>\n        ) : (\n          <ul>\n            {quizResults.scoreHistory.map((score, index) => (\n              <li key={index}>{score}</li>\n            ))}\n          </ul>\n        )}\n        <h2>Classement</h2>\n        {isLoading ? (\n          <p>Chargement du classement...</p>\n        ) : (\n          <div>\n            {quizResults.userRanking.map((user, index) => (\n              <div key={index}>\n                <p>{index + 1} - {user.pseudo} avec un score de {user.score}</p>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default ResultPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}